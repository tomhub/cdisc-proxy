server:
  port: 8080
  # IP addresses to listen on (supports both IPv4 and IPv6)
  # Leave empty or omit to listen on all interfaces (0.0.0.0)
  listen:
    - "0.0.0.0"           # Listen on all IPv4 interfaces
    - "::"                # Listen on all IPv6 interfaces
    # - "127.0.0.1"       # Listen only on localhost IPv4
    # - "::1"             # Listen only on localhost IPv6
    # - "192.168.1.100"   # Listen on specific IPv4 address
    # - "2001:db8::1"     # Listen on specific IPv6 address
  
  # API key for protecting the /refresh endpoint
  # Generate a strong random key: openssl rand -hex 32
  auth_key: "your-secure-auth-key-here"

cdisc:
  base_url: "https://library.cdisc.org/api"
  # Your CDISC Library API key
  api_key: "your-cdisc-api-key-here"


# Cache time-to-live (TTL) - how long to keep cached responses
# Supports multiple formats:
#   - Go duration format: "24h", "30m", "168h"
#   - Custom formats: "1y" (year), "7d" (days), "2w" (weeks)

cache:
  # L1 cache: in memory cache for recent, hot data
  l1:
      driver: "dragonfly"    # valkey, redis, or dragonfly
      address: "localhost:6379"
      # L1 TTL - Hot cache duration
      ttl: "2h" # let it live longer if available RAM is high

  # L2 cache: persistant cache for 'warm' data, but not to keep it in memory
  l2:
      # Set ONLY one of these. The program will error if both are provided.
      # DuckDB, nothing to configure externally, except the path here:
      duckdb_path: "/var/lib/cdisc-proxy/cdisc_cache.db" # default path

      # if duckdb is too slow, consider PostgreSQL instead, but performance not tested.
      # postgres_dsn: "postgres://user:pass@localhost:5432/cdisc?sslmode=disable"

      #L2 TTL 
      ttl: "1y"           # Persistent cache duration
      # cleaning up L2 (if needed)
      cleanup_enabled: true
      cleanup_interval: "240h"

# control scheduler - how often to check /mdr/lastupdated; for devel
# set to longer interval, like 12w or even more, but do not abuse upstream
# with small value here, the api reply is not changing so often.
scheduler:
  enabled: true
  interval: "1w"        # How often to check /mdr/lastupdated
